---
title: "TRAILHEADに入門した"
date: 2019-10-31T13:07:17+09:00
categories: 
- Salesforce
tags: 
keywords: 
archives: 2019-10
---

## TRAILHEADってなに

[*Trailhead | 楽しく学ぶ方法*](https://trailhead.salesforce.com/ja/home)

Salesforceが運営している学習サイト、コンテンツは主にSalesforce関連で、経営者、営業、開発向けが用意されている。
Salesforce関連以外もBlockchainや、IOSアプリケーション開発のコンテンツもある。

## やり始める前の認識

- 無数にあるPaaSの一つ
    - SaaSも提供してる
- セールス・顧客系に強い
- アプリやコンポーネントをリリースできる

以下、とりあえず[Trailmix by ルーキー会 Salesforce DeveloperGroup](https://trailhead.salesforce.com/ja/users/00550000007HqDdAAK/trailmixes/start-develop)を順にメモする

## Salesforceテクノロジモデル

- 信頼の基準、最も信頼されるために行ってきた投資
    - [Salesforce Trust](https://trust.salesforce.com/ja/) でシステムの状況や、セキュリティ対策が見れる
- 個別の企業以上のセキュリティを提供する方法
    - マルチテナンシー型で提供する
        - 利益となるイノベーションに注力できる
        - 高級マンションの建物を想像して
            - ドアマン、備え付き洗濯機...
            - 自分専用のスペース
            - インフラ系は大家が管理
        - Salesforceは大家の役割
        - 小さい企業から大きい企業まで同じコードベースを利用することで利益を得ることができる
- 規則の厳しい業種がSalesforceに最も重要なデータを委ねる理由
    - 上記の通り
- メタデータ
    - データのためのデータ？
    - カスタムタグ、カスタム項目、自動アラート、標準レポート、Chatte等、全てがメタデータ
    - カスタム機能と標準機能のすべてを含むSalesforceインスタンスの構造
    - カスタマイズは特別なメタデータレイヤに分離している
        - バックグラウンドの更新やプラットフォームの更新・改善を行うことができる
- アプリケーション開発
    - カスタマイズや変更が可能なインフラを提供することが使命
    - メタデータ駆動型で速度が出る
        - ケーキにクリームを塗るように
    - ポイント&クリックかカスタムコードで開発

## Salesforce Platformの使用開始

- 標準機能
    - リードと商談
    - 顧客サポートのためのケースとコミュニティ
    - モバイルアプリ
    - 会社とつながるためのChatterとコミュニティ
    - カスタマージャーニーを管理するためのMarketingCloud
    - あまり良くわかってない
- 用語
    - アプリケーション
        - ビジネスプロセスをサポートするオブジェクト、項目、その他の機能のセット
    - オブジェクト
        - 特定の種類の情報が保存される、DBのテーブル
        - 標準とカスタムがある
    - データベース
        - 巨大なスプレッドシートを想像
    - レコード
        - オブジェクトデータベーステーブルの行
    - 項目
        - オブジェクトデータベーステーブルの列
    - 組織
        - Salesforceの特定のインスタンス
- 実際にポイント&クリックで作ってみた
    - データベースへカスタムフィールドを追加できた
    - データベーステーブルのレコード詳細画面で追加されたフィールドの入力欄が表示された
- Salesforce アーキテクチャ
    - 何層にも重なってる
    - マルチテナンシー
- 設定
    - 上部ギアメニューから開く
    - 組織情報、ユーザ、プロファイル、設定変更履歴の参照、ログイン履歴等見れる
- AppExchangeの戦略と、アプリケーションのインストール
    - 使用予定の部門を特定
    - 要望を最大限に満たすものを調査
        - ビジネスの問題
        - 最も苦労している点
        - 何人のユーザが必要としているか
        - 予算
        - 期限
    - そうすることで最適なアプリケーションを見つけやすくなる
    - テスト環境にダウンロード、インストールして、競合がないか確認する
    - 候補が複数ある場合はテストした内容を、使用できない機能や不要な機能がないか検討。関係者にフィードバックを依頼
    - 本番にインストール、トレーニング、ドキュメントの提供

## データモデリング

- Salesプラットフォームでオブジェクトを使用するメリット
    - オブジェクトはデータベーステーブルのこと、テーブルの列が項目、行がレコードとみなされる
    - データモデルはオブジェクトと項目のコレクション
    - 標準オブジェクト
        - Salesforceに含まれるオブジェクト
        - 取引先、取引先責任者、リード、商談などの一般的なビジネスオブジェクト
    - カスタムオブジェクト
        - 会社や業種に固有の情報を保存するために作成するオブジェクト
        - プラットフォームによっては作成にフックして、UIのページレイアウトが作成される
    - 設定の新規からオブジェクト作成と、オブジェクトの項目とリレーションの新規ボタンからフィールド追加を行った
    - スキーマビルダーというMySQLで言うER図のようなツールもある

## プラットフォーム開発の基礎

- Dream House Realty っていうアプリを作っていってみる
- Apex
- SOQL Salesforce Object Query Language
- Apex上のSOQLは実行されてレコードに変換される
- Apexで書いたControllerをVisualforceページから利用できる
- Herokuがでてきた
- RESTやSOAP APIも使える
- Heroku ConnectでSalesforceのオブジェクトをHeroku Postgreに変換できる

## Apexの基礎とデータベース

- 小文字と大文字が区別されない
- 開発者コンソールのDebug > 匿名実行みたいなやつが便利
- sObjectは汎用Type、標準オブジェクト、カスタムオブジェクトのレコードに使用できる
- insert, upsert, mergeといった便利なデータ更新用DMLステートメントがある
- Database配下にDMLステートメントと同じ物があって、それの第二引数にfalseを渡すと例外の代わりにResultオブジェクトを返すことができる
- SOSL 組織全体のレコードから特定の情報を検索、部分一致検索、どのオブジェクトのフィールドを対象とするか選べる
  
## Apexトリガ

- データベースのbeforeSaveとかのこと
- `trigger SoqlTriggerBulk on Account(after update) {` で定義する。このトリガ内で`Trigger`を呼び出せて、そこに色々情報が詰まってる
- レコードごとに処理すると思いし、制限に引っかかるからSOQLとかDMLとか駆使してやろうね

## Apexテスト

- `@isTest`を使うとパラメータを指定できる。知らなかった。
- `Test > RunAll`でやるとコードカバレッジが出せる
- [Limits、startTest、および stopTest の使用 | Apex 開発者ガイド | Salesforce Developers](https://developer.salesforce.com/docs/atlas.ja-jp.222.0.apexcode.meta/apexcode/apex_testing_tools_start_stop_test.htm)